<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>The Hello World of News Search</title>
    <script src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      
      // This code generates a "Raw Searcher" to handle search queries. The Raw 
      // Searcher requires you to handle and draw the search results manually.
      google.load('search', '1');

      var newsSearch;

      function searchComplete() {

        // Check that we got results
        document.getElementById('content').innerHTML = '';
        if (newsSearch.results && newsSearch.results.length > 0) {
          for (var i = 0; i < newsSearch.results.length; i++) {

            // Create HTML elements for search results
            var c = document.createElement('center');
            var p = document.createElement('p');
            var a = document.createElement('a');
            a.href= newsSearch.results[i].url;
            a.innerHTML = newsSearch.results[i].titleNoFormatting;

            // Append search results to the HTML nodes
            p.appendChild(a);
            c.appendChild(p)
            document.body.appendChild(c);
          }
        }
      }

      function onLoad() {
        var parameter = getUrlParameters("search", "", true);


        // Create a News Search instance.
        newsSearch = new google.search.NewsSearch();

        // Set searchComplete as the callback function when a search is 
        // complete.  The newsSearch object will have results in it.
        newsSearch.setSearchCompleteCallback(this, searchComplete, null);

        console.log(parameter);

        // Specify search quer(ies)
        newsSearch.execute(parameter);

      }

      function getUrlParameters(parameter, staticURL, decode){
         /*
          Function: getUrlParameters
          Description: Get the value of URL parameters either from 
                       current URL or static URL
          Author: Tirumal
          URL: www.code-tricks.com
         */
         var currLocation = (staticURL.length)? staticURL : window.location.search,
             parArr = currLocation.split("?")[1].split("&"),
             returnBool = true;
         
         for(var i = 0; i < parArr.length; i++){
              parr = parArr[i].split("=");
              if(parr[0] == parameter){
                  return (decode) ? decodeURIComponent(parr[1]) : parr[1];
                  returnBool = true;
              }else{
                  returnBool = false;            
              }
         }
         
         if(!returnBool) return false;  
      }

      // Set a callback to call your code when the page loads
      google.setOnLoadCallback(onLoad);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="branding"  style="float: left;"></div><br />
    <div id="content">Loading...</div>
  </body>
</html>